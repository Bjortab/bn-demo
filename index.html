<!DOCTYPE html>
<html lang="sv" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blush Narratives — v0.4 online</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="preload" href="styles.v040.css" as="style" />
  <link rel="stylesheet" href="styles.v040.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <strong>Blush Narratives</strong>
      <span class="badge">v0.4 online</span>
    </div>
    <nav class="tabs" role="tablist" aria-label="Huvudmeny">
      <button class="tab is-active" data-tab="home">Hem</button>
      <button class="tab" data-tab="fav">Favoriter</button>
      <button class="tab" data-tab="connect">BlushConnect</button>
    </nav>
    <div class="tools">
      <button id="btnKey" class="chip">API-nyckel</button>
      <button id="btnRescue" class="chip" title="Öppna mini-panel">Rescue</button>
    </div>
  </header>

  <main id="page">
    <!-- HEM -->
    <section id="home" class="view is-active">
      <section class="card" id="player">
        <header class="row gap">
          <h2>Röstprov</h2>
          <div class="spacer"></div>
          <div class="kv">Tempo</div>
          <input id="tempo" type="range" min="0.7" max="1.6" step="0.05" value="1.0" />
          <span id="tempoVal">1.00×</span>
        </header>

        <div class="row wrap gap sm">
          <div class="kv">Nivå</div>
          <div class="chips" id="levelChips" role="group" aria-label="Nivå">
            <button class="chip is-active" data-l="1">1</button>
            <button class="chip" data-l="3">3</button>
            <button class="chip" data-l="5">5</button>
          </div>

          <div class="kv">Längd</div>
          <div class="chips" id="lenChips" role="group" aria-label="Längd">
            <button class="chip is-active" data-m="1">1 min</button>
            <button class="chip" data-m="3">3 min</button>
            <button class="chip" data-m="5">5 min</button>
          </div>

          <div class="kv">Röst</div>
          <select id="voice">
            <option value="alloy">Alloy (neutral)</option>
            <option value="aria">Aria (kvinna)</option>
            <option value="coral">Coral (man)</option>
            <option value="verse">Verse (mjuk)</option>
          </select>
        </div>

        <div class="row gap">
          <textarea id="prompt" placeholder="Skriv din idé…"></textarea>
        </div>

        <footer class="row gap">
          <button id="btnGen" class="btn">Generera</button>
          <button id="btnPlay" class="btn ghost">Lyssna</button>
          <div class="spacer"></div>
          <small id="status" class="muted">Redo</small>
        </footer>
      </section>

      <section class="card">
        <header><h3>Text</h3></header>
        <pre id="story" class="story">— ingen berättelse än —</pre>
      </section>

      <section class="grid">
        <article class="card sm">
          <header><h4>Kvällsritual för närhet</h4></header>
          <p>Mjukt lugn + varm blickkontakt.</p>
          <footer><button class="btn ghost sm" data-sample="nearhet">Lyssna</button></footer>
        </article>
        <article class="card sm">
          <header><h4>Kontakt när stressen biter</h4></header>
          <p>Microwinding när nervsystemet är uppe i varv.</p>
          <footer><button class="btn ghost sm" data-sample="stress">Lyssna</button></footer>
        </article>
        <article class="card sm">
          <header><h4>Sensuell guidning</h4></header>
          <p>Långsam rytm, tid med ord.</p>
          <footer><button class="btn ghost sm" data-sample="sensuell">Lyssna</button></footer>
        </article>
      </section>
    </section>

    <!-- FAVORITER -->
    <section id="fav" class="view">
      <section class="card">
        <header><h2>Sparat</h2></header>
        <p class="muted">Kommer snart.</p>
      </section>
    </section>

    <!-- CONNECT -->
    <section id="connect" class="view">
      <section class="card">
        <header class="row gap">
          <h2>BlushConnect</h2>
          <span class="badge ghost">demo</span>
          <div class="spacer"></div>
          <button id="btnOpenKeyFromConnect" class="chip">API-nyckel</button>
        </header>
        <p class="muted">Profil, filter och matchning kommer i nästa steg. (Scroll-buggen från v0.3 är fixad.)</p>
      </section>
    </section>
  </main>

  <!-- API-nyckel modal -->
  <dialog id="dlgKey">
    <form method="dialog" class="card">
      <header><h3>OpenAI API-nyckel</h3></header>
      <p>Klistra in en nyckel som börjar med <code>sk-</code>. Den lagras lokalt i din webbläsare.</p>
      <input id="keyInput" type="text" placeholder="sk-..." />
      <footer class="row gap">
        <button id="btnKeySave" class="btn">Spara</button>
        <button id="btnKeyClear" class="btn ghost">Rensa</button>
        <div class="spacer"></div>
        <button class="btn ghost" value="cancel">Stäng</button>
      </footer>
      <small id="keyStatus" class="muted">Ingen nyckel lagrad.</small>
    </form>
  </dialog>

  <audio id="audio"></audio>

  <script>console.log('BN v0.4 online');</script>
  <script src="config.js"></script>
  <script defer src="app.v040.js"></script>
</body>
</html>
