<!DOCTYPE html>
<html lang="sv" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blush Narratives — v0.5.0</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Blush Narratives</div>
    <div class="top-actions">
      <button id="btnApiKey" class="btn ghost">API-nyckel</button>
      <button id="btnRescue" class="btn ghost">Rescue</button>
      <span id="buildTag" class="build">BN v0.5.0</span>
    </div>
  </header>

  <main class="container">
    <section class="panel">
      <div class="row stack">
        <label class="lbl">Nivå</label>
        <div class="level-row">
          <button class="chip" data-level="1">1</button>
          <button class="chip" data-level="2">2</button>
          <button class="chip" data-level="3">3</button>
          <button class="chip" data-level="4">4</button>
          <button class="chip" data-level="5">5</button>
        </div>
      </div>

      <div class="row grid3">
        <div>
          <label class="lbl">Längd</label>
          <div class="seg" id="lenGroup">
            <button class="seg-btn" data-len="1">1 min</button>
            <button class="seg-btn" data-len="3">3 min</button>
            <button class="seg-btn" data-len="5">5 min</button>
          </div>
        </div>
        <div>
          <label class="lbl">Röst</label>
          <select id="voiceSel" class="select">
            <option value="alloy">Alloy</option>
            <option value="coral">Coral</option>
            <option value="verse">Verse</option>
            <option value="sage">Sage</option>
          </select>
        </div>
        <div>
          <label class="lbl">Tempo</label>
          <div class="slider-row">
            <input id="tempo" type="range" min="0.8" max="1.4" step="0.05" value="1.0" />
            <span id="tempoVal">1.0×</span>
          </div>
        </div>
      </div>

      <div class="row stack">
        <label class="lbl">Skapa egen berättelse</label>
        <textarea id="idea" rows="6" placeholder="Skriv din idé…"></textarea>
      </div>

      <div class="row gap">
        <button id="btnGenerate" class="btn primary">Generera</button>
        <button id="btnListen" class="btn">Lyssna</button>
        <button id="btnStop" class="btn ghost">Stoppa</button>
        <span id="status" class="muted"></span>
        <span id="ttsStatus" class="muted"></span>
      </div>
    </section>

    <section class="panel">
      <div class="row space">
        <h3 class="lbl">Rekommenderat</h3>
        <div class="chip-row" id="tagRow">
          <button class="chip small active" data-tag="alla">Alla</button>
          <button class="chip small" data-tag="romantik">Romantik</button>
          <button class="chip small" data-tag="lekfullt">Lekfullt</button>
          <button class="chip small" data-tag="sensuellt">Sensuellt</button>
          <button class="chip small" data-tag="eftervård">Eftervård</button>
        </div>
      </div>
      <div id="cards" class="cards"></div>
    </section>

    <section class="panel">
      <h3 class="lbl">Text</h3>
      <div id="storyOut" class="story"></div>
    </section>
  </main>

  <!-- API-nyckel dialog -->
  <dialog id="apiDlg" class="dialog">
    <form method="dialog">
      <h3>Lagra API-nyckel lokalt</h3>
      <p class="muted">För TTS (röst) i klienten behöver du spara din nyckel lokalt. (Servern använder egen nyckel.)</p>
      <input id="apiInput" class="input" placeholder="sk-..." />
      <div class="row gap end">
        <button value="cancel" class="btn ghost">Stäng</button>
        <button id="saveApiBtn" class="btn primary">Spara</button>
      </div>
    </form>
  </dialog>

  <!-- Rescue -->
  <dialog id="rescDlg" class="dialog">
    <form method="dialog">
      <h3>BN Rescue</h3>
      <div class="row stack">
        <label class="lbl">Testa röst</label>
        <button id="rescueSpeak" class="btn">Testa TTS</button>
      </div>
      <div class="row stack">
        <label class="lbl">Nyckel (maskad)</label>
        <pre id="maskKey" class="muted"></pre>
      </div>
      <div class="row gap end">
        <button value="cancel" class="btn ghost">Stäng</button>
      </div>
    </form>
  </dialog>

  <script defer src="app.js"></script>
</body>
</html>
