<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Blush Narratives — v1.6</title>
  <meta name="theme-color" content="#0f1117" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css?v=16" />
  <script defer src="config.js?v=16"></script>
  <script defer src="app.js?v=16"></script>
</head>
<body>
  <!-- Topbar -->
  <header class="top">
    <div class="row">
      <div class="logo">Blush Narratives</div>
      <div class="right">
        <button id="privacy" class="ghost" aria-pressed="false" title="Integritetsläge">Privat</button>
        <button id="openConnect" class="ghost">BlushConnect</button>
      </div>
    </div>
  </header>

  <!-- Spelare -->
  <section class="player card" id="player">
    <div class="meta">
      <div id="nowTitle">Röstprov för nivå 1</div>
      <div id="nowSub" class="muted">Tryck “Lyssna nu” för en kort provläsning.</div>
      <div id="nowInfo" class="muted small">Röst: Auto • Tempo: 1.0x</div>
    </div>
    <div class="controls">
      <button id="btnPlay" aria-label="Lyssna nu">Lyssna nu</button>
      <input id="seek" type="range" min="0" max="100" value="0" />
      <div class="more">
        <label class="sr" for="rate">Tempo</label>
        <input id="rate" type="range" min="0.8" max="1.3" step="0.05" value="1" />
        <div class="skip">
          <button id="back10" class="ghost sm" title="Spola tillbaka 10 s">⏪ 10s</button>
          <button id="fwd10"  class="ghost sm" title="Spola fram 10 s">10s ⏩</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Skapa egen berättelse (med nivåer & röst) -->
  <section id="createBox" class="container card">
    <h3>Skapa egen berättelse</h3>

    <div class="create-controls">
      <div class="levels" role="group" aria-label="Erotiknivå">
        <button class="lvl" data-lvl="1" aria-pressed="true">1</button>
        <button class="lvl" data-lvl="2">2</button>
        <button class="lvl" data-lvl="3">3</button>
        <button class="lvl" data-lvl="4">4</button>
        <button class="lvl" data-lvl="5">5</button>
      </div>

      <div class="voicepick">
        <label for="voiceSel" class="sr">Röst</label>
        <select id="voiceSel" aria-label="Välj röst"></select>
        <button id="voicePreview" class="ghost sm">Lyssna</button>
        <button id="toggleVoices" class="link sm" aria-expanded="false">Visa alla röster</button>
      </div>
    </div>

    <textarea id="prompt" rows="3" placeholder="Skriv stämning/plats/roll: ex. 'En förtrolig kväll i köket, lågt ljus och nära röster…'"></textarea>
    <div class="create-row">
      <button id="btnGenerate" class="btn">Generera</button>
      <span id="genStatus" class="status"></span>
    </div>
  </section>

  <!-- Chips -->
  <section class="filters container">
    <div class="chips" id="chips"></div>
  </section>

  <!-- Flöde -->
  <main class="container">
    <h2>Rekommenderat</h2>
    <div id="feed" class="grid compact"></div>

    <h2>Sparat</h2>
    <div id="saved" class="grid compact"></div>
  </main>

  <!-- BlushConnect -->
  <aside id="connect" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" aria-label="BlushConnect">
      <header class="sheet-head">
        <h3>BlushConnect</h3>
        <button id="closeConnect" class="ghost sm">Stäng</button>
      </header>
      <div class="sheet-body">
        <div class="card">
          <h4>Din profil (lokal)</h4>
          <div class="pref two">
            <label>Alias <input id="alias" placeholder="Ditt alias" /></label>
            <label>Ålder <input id="age" type="number" min="18" max="99" /></label>
          </div>
          <div class="pref">
            <label>Om dig</label>
            <textarea id="about" rows="2" placeholder="Kort beskrivning…"></textarea>
          </div>
          <div class="pref two">
            <label>Favoritnivå
              <div class="levels small">
                <button class="lvl" data-lvl="1">1</button>
                <button class="lvl" data-lvl="2">2</button>
                <button class="lvl" data-lvl="3">3</button>
                <button class="lvl" data-lvl="4">4</button>
                <button class="lvl" data-lvl="5">5</button>
              </div>
            </label>
            <label>Röst
              <select id="voiceSel2"></select>
            </label>
          </div>
          <div class="pref">
            <label class="toggle"><input type="checkbox" id="privacyChk" /> <span>Integritetsläge (dölj rubriker i historik)</span></label>
          </div>
        </div>

        <div class="card">
          <h4>Utforska andra (demo)</h4>
          <div class="pref two">
            <label>Nivåfilter
              <div class="levels small">
                <button class="lvl" data-filter="1">1</button>
                <button class="lvl" data-filter="2">2</button>
                <button class="lvl" data-filter="3">3</button>
                <button class="lvl" data-filter="4">4</button>
                <button class="lvl" data-filter="5">5</button>
              </div>
            </label>
            <label>Preferens
              <select id="prefFilter">
                <option value="">Alla</option>
                <option value="romantik">Romantik</option>
                <option value="lekfullt">Lekfullt</option>
                <option value="sensuellt">Sensuellt</option>
              </select>
            </label>
          </div>
          <div id="people" class="people"></div>
        </div>

        <div class="card">
          <h4>Dela preferenser</h4>
          <p class="muted small">Skapa en länk med din nivå/röst/privat-läge. Öppnas på annan enhet → importeras lokalt.</p>
          <button id="shareLink" class="btn sm">Kopiera delningslänk</button>
          <span id="shareStatus" class="status"></span>
        </div>
      </div>
    </div>
  </aside>

  <!-- Bottennav -->
  <nav class="bottom">
    <button data-tab="home" class="active">Hem</button>
    <button data-tab="feed">Flöde</button>
    <button data-tab="saved">Sparat</button>
    <button id="panic">Panik</button>
  </nav>

  <!-- Mallar -->
  <template id="card-tpl">
    <article class="card mini">
      <h4 class="title"></h4>
      <p class="ingress"></p>
      <div class="actions">
        <button class="save">Spara</button>
        <button class="open">Lyssna</button>
      </div>
    </article>
  </template>

  <template id="person-tpl">
    <article class="person">
      <div class="p-top">
        <div class="p-alias"></div>
        <div class="p-badge"></div>
      </div>
      <div class="p-about"></div>
      <div class="p-meta"></div>
    </article>
  </template>

  <dialog id="modal">
    <article class="card">
      <h3 id="mTitle"></h3>
      <p id="mIngress" class="muted"></p>
      <div id="mBody"></div>
      <div class="actions right">
        <button id="mSave" class="btn sm">Spara</button>
        <button id="closeModal" class="ghost">Stäng</button>
      </div>
    </article>
  </dialog>
</body>
</html>
