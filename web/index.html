<!doctype html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BlushNarratives — Core</title>
  <style>
    body { background:#111; color:#eee; font:16px/1.4 system-ui, sans-serif; margin:0; padding:24px; }
    .row { margin:12px 0; }
    textarea { width:100%; height:140px; background:#181818; color:#eee; border:1px solid #333; padding:10px; }
    select, input, button { padding:8px 10px; margin-right:8px; background:#181818; color:#eee; border:1px solid #333; }
    button#go { background:#c21; border-color:#c21; }
    pre#log { background:#000; color:#90ee90; padding:10px; height:180px; overflow:auto; border:1px solid #333; }
    audio { width:100%; margin-top:10px; }
  </style>
</head>
<body>
  <h1>BlushNarratives — Core</h1>

  <div class="row">
    <textarea id="prompt" placeholder="Skriv din prompt…"></textarea>
  </div>

  <div class="row">
    Nivå:
    <select id="level">
      <option value="1">1 – lätt</option>
      <option value="2">2 – enkel</option>
      <option value="3" selected>3 – mellan</option>
      <option value="4">4 – svår</option>
      <option value="5">5 – explicit</option>
    </select>

    Längd (min):
    <input id="minutes" type="number" min="1" max="20" value="5"/>

    Språk:
    <select id="lang">
      <option value="sv" selected>Svenska</option>
      <option value="en">Engelska</option>
    </select>

    <button id="status" type="button">Status</button>
    <button id="go" type="button">Generera & lyssna</button>
  </div>

  <audio id="player" controls></audio>

  <pre id="log"></pre>

  <!-- Viktigt: app.js laddas sist så att elementen finns när event-lyssnarna sätts -->
  <script src="./app.js"></script>
  <!-- Snabb sanity-check: skriv en rad i loggen när app.js verkligen laddats -->
  <script>
    if (window && typeof statusPing === "function") {
      const t = new Date().toLocaleTimeString();
      document.getElementById("log").textContent += `[${t}] Frontend redo (app.js laddad)\n`;
    } else {
      console.error("app.js laddades inte – kontrollera sökvägen.");
      alert("app.js laddades inte – kontrollera <script src='./app.js'> i index.html");
    }
  </script>
</body>
</html>
